<div class="row">
  <div class="col-lg-6">
    <h1>{{ accion }} Contacto</h1>
  </div>
</div>
<!-- <pre>{{contactoForm.value | json}}</pre> -->
<div class="row">
  <div class="col-lg-4">
    <form autocomplete="off" [formGroup]="contactoForm">
      <div class="col-lg-12">
        <mat-form-field class="full-width">
          <mat-label>Nombre Completo</mat-label>
          <input
            matInput
            placeholder="Ej: Juan Perez"
            formControlName="nombreCompleto"
          />
        </mat-form-field>
        <div
          *ngIf="
            contactoForm.get('nombreCompleto').errors?.required &&
            contactoForm.get('nombreCompleto').touched
          "
          style="margin-top: -20px"
        >
          <span class="text-danger"
            >Este campo es <strong>requerido.</strong></span
          >
        </div>
        <div
          *ngIf="contactoForm.get('nombreCompleto').errors?.maxlength"
          style="margin-top: -20px"
        >
          <span class="text-danger"
            >Este campo debe tener como
            <strong>máximo 20 carácteres.</strong></span
          >
        </div>
        <div
          [class.mt-0]="contactoForm.get('nombreCompleto').errors?.maxlength"
          *ngIf="
            contactoForm.get('nombreCompleto').errors?.pattern &&
            contactoForm.get('nombreCompleto').touched
          "
          style="margin-top: -20px"
        >
          <span class="text-danger"
            >Este campo solo puede poseer <strong>letras.</strong></span
          >
        </div>
      </div>
      <div class="col-lg-12">
        <mat-form-field class="full-width">
          <mat-label>Correo</mat-label>
          <input
            matInput
            placeholder="Ej: juan@correo.ext"
            formControlName="correo"
          />
        </mat-form-field>
        <div
          *ngIf="
            contactoForm.get('correo').errors?.required &&
            contactoForm.get('correo').touched
          "
          style="margin-top: -20px"
        >
          <span class="text-danger"
            >Este campo es <strong>requerido.</strong></span
          >
        </div>
        <div
          *ngIf="
            contactoForm.get('correo').errors?.email &&
            contactoForm.get('correo').touched
          "
          style="margin-top: -20px"
        >
          <span class="text-danger"
            >Este campo debe ser un <strong>correo.</strong></span
          >
        </div>
      </div>
      <div class="col-lg-12">
        <mat-form-field class="full-width">
          <mat-label>Información de Trabajo</mat-label>
          <textarea
            matInput
            placeholder="Ej: Trabajo en ..."
            formControlName="workInfo"
          ></textarea>
        </mat-form-field>
      </div>

      <div class="col-lg-12">
          <div class="row">
              <div [class]="isEditar ? 'col-lg-10' : 'col-lg-12'">
                  <mat-form-field class="full-width">
                    <mat-label>Núm Teléfono</mat-label>
                    <input
                      matInput
                      placeholder="Ej: 8095444545"
                      formControlName="telefono"
                    />
                  </mat-form-field>
              </div>
              <div class="col-lg-2" style="margin-top: 15px;" *ngIf="isEditarTel">
                  <a class="text-success pointer" (click)="editarTelefono()">
                      <mat-icon>edit</mat-icon>
                  </a>
              </div>
              <div class="col-lg-2" style="margin-top: 15px;" *ngIf="isEditar && !isEditarTel">
                <a class="text-success pointer" (click)="agregarTelefono()">
                    <mat-icon>add</mat-icon>
                </a>
            </div>
          </div>
        <div
          *ngIf="
            contactoForm.get('telefono').errors?.required &&
            contactoForm.get('telefono').touched
          "
          style="margin-top: -20px"
        >
          <span class="text-danger"
            >Este campo debe tener como
            <strong>mínimo 1 carácter.</strong></span
          >
        </div>
        <div
          *ngIf="
            contactoForm.get('telefono').errors?.pattern &&
            contactoForm.get('telefono').touched
          "
          style="margin-top: -20px"
        >
          <span class="text-danger"
            >Este campo solo puede poseer <strong>números.</strong></span
          >
        </div>
      </div>
      <div class="col-lg-12 mt-4" style="text-align: center">
        <button
          class="btn btn-success btn-lg"
          style="margin-right: 10px"
          (click)="guardarContacto()"
          [disabled]="contactoForm.invalid"
        >
          Aceptar
        </button>
        <button class="btn btn-secondary btn-lg" routerLink="/contactos">
          Cancelar
        </button>
      </div>
    </form>
  </div>
  <div class="col-lg-4 offset-2">
    <mat-list *ngIf="isEditar; else noEdit">
      <div mat-subheader>Telefonos</div>
      <mat-list-item *ngFor="let tel of telefonos; let i = index">
        <mat-icon
          mat-list-icon
          class="pointer"
          style="color: rgba(0, 0, 255, 0.521)"
          (click)="aEditarTelefono(i)"
          >edit</mat-icon
        >
        <mat-icon
          mat-list-icon
          class="pointer"
          style="color: #8f0000a2"
          (click)="eliminarTelefono(i)"
          >delete</mat-icon
        >
        <div mat-line>{{ tel }}</div>
      </mat-list-item>
    </mat-list>
    <ng-template #noEdit>
      <img src="https://pixabay.com/get/57e6d7414f53ab14f6da8c7dda353678153fd7ec5452774b_1280.png" alt="Formulario" style="width: 90%; height: 90%;">
    </ng-template>
  </div>
</div>
